<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
{% if shape_data != {} %}
{% if shape_data.edges == 0 %}
<body onload="closeWindow({{shape_data.shape}}, {{shape_data.tot_len}})">
{% else %}
<table class="table table-striped" dir="rtl" align="center">
    <form id="shape_form" method=POST action="{{ url_for('shape_editor') }}" onsubmit="input_form.disabled = true; return true;"  onkeydown="return event.key != 'Enter';">
        <tr>
            <td>
                <input type="hidden" name="shape_data" value="{{shape_data.shape}}">
                <img src="{{shape_data.img_plot}}" title="{{shape_data.shape}}"/>
            </td>
            <td>
            {% for edge in shape_data.edges %}
                <input type="number" class="amount" name="{{edge}}" id="{{edge}}" onkeydown="return event.key != 'Enter';" onkeyup='focusNext({{loop.index0}})' placeholder="{{edge}}" required autofocus>
            {% endfor %}
            </td>
            <td>
            {% for ang in shape_data.angels %}
                <input type="number" class="amount" name="ang_{{loop.index}}" id="ang_{{loop.index}}" onkeydown="return event.key != 'Enter';" onkeyup='focusNext({{loop.index0 + 5}})' placeholder="< {{ ang }}">
            {% endfor %}
            </td>
        </tr>
    <tr>
        <td>
            <button class="btn btn-primary btn-block" id="submit" type="submit">אישור</button>
        </td>
        <td>
            סהכ אורך<br>
            <input type="text" name="length" id="length" readonly />
        </td>
    </tr>
    </form>
</table>
{% endif %}
{% else %}
<table class="table table-striped" dir="rtl" align="center">
    {% for shape in shapes %}
    <tr ondblclick="location.href='/shape_editor?{{shape}}'">
        <td width="30%"><img src="\static\images\shapes\{{shape}}.png" title="{{shape}}"/></td>
        <td width="60%" style="text-align:center;">{{shape}}: <br> {{ shapes[shape] }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}
<script src="\static\js\shapes.js"></script>
<script>
datatodisp = JSON.parse('{"1": 1, "2": 1, "3": 1, "4": 1, "5": 1, "ang_1": 1, "ang_2": 1, "ang_3": 1, "ang_4": 1}');
dtd_order = ['1', '2', '3', '4', '5', 'ang_1', 'ang_2', 'ang_3', 'ang_4'];
</script>
</body>
</html>