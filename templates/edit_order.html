{% extends "layout.html" %}
{% block body %}
<style>
    #shape_data {
  opacity: 0;
  width: 0;
  float: left; /* Reposition so the validation message shows over the label */
}

div {
    text-align: center;
}
</style>
<table class="table table-striped" dir="rtl" align="center" >
    <tr>
    {% for item in order_data.info %}
        <td>
            <b>
                {% if dictionary[item] %}
                {{ dictionary[item] }}
                {% else %}
                {{ item }}
                {% endif %}:
            </b>
            {% if dictionary[order_data.info[item]] %}
            {{dictionary[order_data.info[item]]}}
            {% else %}
            {{ order_data.info[item] }}
            {% endif %}
        </td>
    {% endfor %}
    </tr>
</table>
{% if order_data.include %}
    {% include order_data.include %}
{% endif %}
<form name="input_form" id="input_form" method=POST action="{{ url_for('edit_order') }}">
<table class="table table-striped" dir="rtl" align="center">
    <tr>
        <td><button type=submit class="btn btn-primary btn-block" name="input_form">שורה חדשה</button></td>
        <td><button ondblclick="location.href='\close'" type="button" class="btn btn-primary btn-block" disabled>העתק שורה אחרונה</button></td>
        <td><button ondblclick="location.href='\close'" type="button" class="btn btn-primary btn-block" >שמור וסגור</button></td>
        <td><button ondblclick="location.href='\close?print'" type="button" class="btn btn-primary btn-block" >הדפס הזמנה</button></td>
        <td><button ondblclick="location.href='\close?print_l'" type="button" class="btn btn-primary btn-block" >הדפס פתקיות \ העבר לייצור</button></td>
        <!--<td><button ondblclick="confirmDel()" type="button" class="btn btn-primary btn-block" >מחק הזמנה</button></td>-->
    </tr>
</table>
<table class="table table-striped" dir="rtl" align="center">
    <tr>
        {% for item in order_data.data_to_display %}
        {% if dictionary[item] %}
        {% set name = dictionary[item] %}
        {% else %}
        {% set name = item %}
        {% endif %}
        <td>
            <b>{{ name }}</b>
        </td>
        {% endfor %}
    </tr>
    <tr>
        {% for item in order_data.data_to_display %}
        {% if dictionary[item] %}
        {% set name = dictionary[item] %}
        {% else %}
        {% set name = item %}
        {% endif %}
            {% if order_data.data_to_display[item] == 0 %} <!-- Regular not required -->
            <td>
            <input type="text" class="form-control" name="{{ item }}" placeholder="{{ name }}">
            {% else %}
            {% if order_data.data_to_display[item] == 1 %} <!-- Regular required -->
            <td>
            <input type="number" class="form-control" name="{{ item }}" placeholder="{{ name }}" autofocus="autofocus" required>
            {% else %}
            {% if order_data.data_to_display[item] == 2 %} <!-- Auto calculated NOT an input1 -->
            <td width="80">
            <input class="form-control" name="{{ item }}" id="{{ item }}" value="---" readonly>
            <input type="hidden" name="{{ item }}"/>
            {% else %}<!--
            {% if order_data.data_to_display[item] == 2.1 %} Auto calculated NOT an input1
                {% include 'spec_rebar_editor.html' %}
            {% else %}-->
            {% if order_data.data_to_display[item] == 2.2 %} <!-- Auto calculated NOT an input1 -->
            <td>
            <input class="form-control" name="{{ item }}" id="{{ item }}" required readonly>
            <input type="hidden" name="{{ item }}"/>
            {% else %}
            {% if order_data.data_to_display[item] == 3 %} <!-- Data list - Must have a list with the item name -->
            <td>
            <input list="{{ item }}" class="form-control" name="{{ item }}" placeholder="{{ name }}" autofocus="autofocus" pattern="{{ patterns[item] }}" required>
                <datalist id="{{ item }}">
                {% for optn in lists[item] %}
                    <option value="{{ optn }}">{{dictionary[optn]}}</option>
                {% endfor %}
                </datalist>
            {% else %}
            {% if order_data.data_to_display[item] == 3.1 %} <!-- Data list - Must have a list with the item name -->
            <td>
            <input list="{{ item }}1" id="editor" class="form-control" ondblclick='openNewWindow("{{ dictionary["editor_" + item] }}")' name="{{ item }}" placeholder="{{ name }}" autofocus="autofocus" pattern="{{ patterns[item] }}" required>
                <datalist id="{{ item }}1">
                {% for optn in lists[item] %}
                    <option value="{{ optn }}">{{dictionary[optn]}}</option>
                {% endfor %}
                </datalist>
            <input name="{{ item }}_data" id="shape_data" type="text" required>
            {% else %}
            {% if order_data.data_to_display[item] == 4 %} <!-- Check box -->
            <td>
            <input type="checkbox" value="Yes" class="form-control" name="{{ item }}">
            {% else %}
            ------
            {% endif %}
            {% endif %}
            {% endif %}
            {% endif %}
            {% endif %}
            {% endif %}
            {% endif %}
            {% endif %}
        </td>
        {% endfor %}
    </tr>
    {% for row in order_data.order_rows %}
    <tr ondblclick="location.href='/edit_row?{{row['order_id']}}job{{row['job_id']}}'">
        {% for item in order_data.data_to_display %}
        <td>
            {{ row[item] }}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
</form>
<script src="\static\js\shapes.js" onload="findTotal2('amount_x', 'width', 'x_length');findTotal2('amount_y', 'length', 'y_length')"></script>
{% endblock %}