{% extends "layout.html" %}
{% block body %}
<table class="table table-striped" align="center" dir="rtl">
    <tr>
        <td><button onclick="location.href='/new_order?regular'" type="button" class="btn btn-primary btn-block">הזמנת ברזל חדשה</button></td>
        <td><button onclick="location.href='/new_order?rebar'" type="button" class="btn btn-primary btn-block">הזמנת רשת חדשה</button></td>
        <td><button onclick="location.href='/new_order?rebar_special'" type="button" class="btn btn-primary btn-block">הזמנת כוורת חדשה</button></td>
        <td><button onclick='openNewWindow("\copy_order")' type="button" class="btn btn-primary btn-block" >העתק הזמנה</button></td>
        <td>
            <form method=POST id="date_form" autocomplete="off" action="{{ url_for('orders_page') }}">
                <label>הצג הזמנות מיום</label>
                <input type="date" name="date_from" value="{{defaults.from}}" onchange="formSubmit('date_form');">
                <label>עד יום</label>
                <input type="date" name="date_to" value="{{defaults.to}}" onchange="formSubmit('date_form');">
            </form>
        </td>
    </tr>
</table>
<table class="table table-striped" align="center" dir="rtl">
    <tr>
        <form method=POST autocomplete="off" action="{{ url_for('orders_page') }}">
        <td>
            <label>חיפוש</label>
            <input type="text" name="order_id" placeholder="מספר הזמנה">
            <input type="text" name="info.costumer_name" placeholder="שם לקוח">
            <button type="submit">חפש</button>
        </td>
        </form>
        <td>סינון לפי:</td>
        <td>
            <button onclick="location.href='/user_config?filter=regular';refreshWindow();">הזמנות ברזל</button>
        </td>
        <td>
            <button onclick="location.href='/user_config?filter=rebar';refreshWindow();">הזמנות רשת</button>
        </td>
        <td>
            <button onclick="location.href='/user_config?filter=R';refreshWindow();">ייצור רשת</button>
        </td>
        <td>
            <button onclick="location.href='/user_config?filter=';refreshWindow();">איפוס</button>
        </td>
    </tr>
</table>
<table class="table table-condensed" dir="rtl" align="center">
    <tr>
        {% for item in display_items %}
        <td width="5%"  style="outline: thin solid;text-align: center">
            <b>{{dictionary[item]}}</b>
        </td>
        {% endfor %}
    </tr>
    {% for order in orders %}
    <tr ondblclick="location.href='/edit_order?{{ orders[order]['order_id'] }}'" bgcolor="{{dictionary.html_colors[orders[order].status]}}">
        {% for item in display_items %}
        <td height="50" style="outline: thin solid;text-align: center">
        {% if dictionary[orders[order][item]] %}
            {{dictionary[orders[order][item]]}}
        {% else %}
            {{ orders[order][item] }}
        {% endif %}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table >
<script src="\static\js\shapes.js" ></script>
<script>
const refreshWindow = () => {
setTimeout(function(){
location.reload();
}, 300);
setTimeout("window.close()",300)
};
function formSubmit(formName){
    document.getElementById(formName).submit();
}
</script>
{% endblock %}